# SpringAI å®è·µç»ƒä¹ æŒ‡å—

## ğŸ¯ ç»ƒä¹ ç›®æ ‡

é€šè¿‡æœ¬æŒ‡å—çš„å®è·µç»ƒä¹ ï¼Œæ‚¨å°†ï¼š
- é€æ­¥æ„å»ºä¸€ä¸ªå®Œæ•´çš„SpringAIåº”ç”¨
- æ·±å…¥ç†è§£SpringAIçš„æ ¸å¿ƒæ¦‚å¿µ
- æŒæ¡AIå·¥å…·è°ƒç”¨çš„å®ç°æ–¹æ³•
- å­¦ä¼šå¤„ç†å®é™…å¼€å‘ä¸­çš„å¸¸è§é—®é¢˜

## ğŸ“‹ ç»ƒä¹ ç¯å¢ƒå‡†å¤‡

### 1. å¼€å‘ç¯å¢ƒè¦æ±‚
- JDK 17+
- Maven 3.6+
- IDE (æ¨èIntelliJ IDEA)
- MySQL 8.0+
- Git

### 2. é¡¹ç›®åˆå§‹åŒ–
```bash
# å…‹éš†é¡¹ç›®
git clone <your-repository-url>
cd SpringAI

# å®‰è£…ä¾èµ–
mvn clean install
```

## ğŸš€ ç»ƒä¹ ä¸€ï¼šåŸºç¡€èŠå¤©åŠŸèƒ½

### ä»»åŠ¡ç›®æ ‡
åˆ›å»ºä¸€ä¸ªç®€å•çš„AIèŠå¤©æ¥å£ï¼Œæ”¯æŒåŸºæœ¬çš„æ–‡æœ¬å¯¹è¯ã€‚

### æ­¥éª¤1ï¼šåˆ›å»ºåŸºç¡€æ§åˆ¶å™¨
```java
@RestController
@RequestMapping("/api/chat")
@Slf4j
public class ChatController {
    
    @Autowired
    private ChatClient chatClient;
    
    @PostMapping("/message")
    public String sendMessage(@RequestParam String message) {
        return chatClient.prompt()
                .user(message)
                .call()
                .content();
    }
}
```

### æ­¥éª¤2ï¼šé…ç½®ChatClient
```java
@Configuration
public class ChatConfig {
    
    @Bean
    public ChatClient chatClient(OllamaChatModel ollamaChatModel) {
        return ChatClient.builder(ollamaChatModel)
                .defaultSystem("ä½ æ˜¯ä¸€ä¸ªå‹å¥½çš„AIåŠ©æ‰‹ï¼Œè¯·ç”¨ä¸­æ–‡å›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚")
                .build();
    }
}
```

### æ­¥éª¤3ï¼šæµ‹è¯•æ¥å£
```bash
curl -X POST "http://localhost:8080/api/chat/message?message=ä½ å¥½"
```

### ç»ƒä¹ ä»»åŠ¡
1. å®ç°æµå¼å“åº”ç‰ˆæœ¬
2. æ·»åŠ å¯¹è¯å†å²è®°å½•
3. è‡ªå®šä¹‰ç³»ç»Ÿæç¤ºè¯

## ğŸ”§ ç»ƒä¹ äºŒï¼šå·¥å…·è°ƒç”¨å®ç°

### ä»»åŠ¡ç›®æ ‡
å®ç°ä¸€ä¸ªè®¡ç®—å™¨å·¥å…·ï¼Œè®©AIèƒ½å¤Ÿè¿›è¡Œæ•°å­¦è®¡ç®—ã€‚

### æ­¥éª¤1ï¼šåˆ›å»ºè®¡ç®—å™¨å·¥å…·
```java
@Service
public class CalculatorTool {
    
    @Tool(description = "è¿›è¡Œæ•°å­¦è®¡ç®—")
    public String calculate(@ToolParam(description = "æ•°å­¦è¡¨è¾¾å¼") String expression) {
        try {
            // ç®€å•çš„æ•°å­¦è¡¨è¾¾å¼è®¡ç®—
            ScriptEngineManager manager = new ScriptEngineManager();
            ScriptEngine engine = manager.getEngineByName("JavaScript");
            Object result = engine.eval(expression);
            return expression + " = " + result;
        } catch (Exception e) {
            return "è®¡ç®—é”™è¯¯: " + e.getMessage();
        }
    }
    
    @Tool(description = "è·å–å½“å‰æ—¶é—´")
    public String getCurrentTime() {
        return LocalDateTime.now().format(DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss"));
    }
}
```

### æ­¥éª¤2ï¼šæ³¨å†Œå·¥å…·
```java
@Bean
public ChatClient chatClient(OllamaChatModel ollamaChatModel, CalculatorTool calculatorTool) {
    return ChatClient.builder(ollamaChatModel)
            .defaultSystem("ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·è¿›è¡Œæ•°å­¦è®¡ç®—å’ŒæŸ¥è¯¢æ—¶é—´ã€‚")
            .defaultTools(calculatorTool)
            .build();
}
```

### æ­¥éª¤3ï¼šæµ‹è¯•å·¥å…·è°ƒç”¨
```bash
curl -X POST "http://localhost:8080/api/chat/message?message=è¯·è®¡ç®— 25 * 4 + 10"
```

### ç»ƒä¹ ä»»åŠ¡
1. æ·»åŠ æ›´å¤šæ•°å­¦å‡½æ•°ï¼ˆå¹³æ–¹æ ¹ã€å¹‚è¿ç®—ç­‰ï¼‰
2. å®ç°å•ä½è½¬æ¢å·¥å…·
3. æ·»åŠ æ•°æ®éªŒè¯å’Œé”™è¯¯å¤„ç†

## ğŸŒ¤ï¸ ç»ƒä¹ ä¸‰ï¼šå¤©æ°”æœåŠ¡é›†æˆ

### ä»»åŠ¡ç›®æ ‡
é›†æˆçœŸå®çš„å¤©æ°”APIï¼Œå®ç°å¤©æ°”æŸ¥è¯¢åŠŸèƒ½ã€‚

### æ­¥éª¤1ï¼šåˆ›å»ºå¤©æ°”APIå®¢æˆ·ç«¯
```java
@Service
@Slf4j
public class WeatherApiClient {
    
    @Value("${weather.api.key}")
    private String apiKey;
    
    @Value("${weather.api.url}")
    private String apiUrl;
    
    public WeatherInfo getWeatherByCity(String city) {
        try {
            String url = apiUrl + "/weather?q=" + city + "&appid=" + apiKey + "&units=metric&lang=zh_cn";
            
            RestTemplate restTemplate = new RestTemplate();
            ResponseEntity<String> response = restTemplate.getForEntity(url, String.class);
            
            // è§£æJSONå“åº”
            ObjectMapper mapper = new ObjectMapper();
            JsonNode root = mapper.readTree(response.getBody());
            
            return WeatherInfo.builder()
                    .city(city)
                    .temperature(root.path("main").path("temp").asDouble())
                    .humidity(root.path("main").path("humidity").asInt())
                    .description(root.path("weather").get(0).path("description").asText())
                    .windSpeed(root.path("wind").path("speed").asDouble())
                    .updateTime(LocalDateTime.now())
                    .build();
                    
        } catch (Exception e) {
            log.error("è·å–å¤©æ°”ä¿¡æ¯å¤±è´¥: {}", e.getMessage());
            throw new RuntimeException("è·å–å¤©æ°”ä¿¡æ¯å¤±è´¥");
        }
    }
}
```

### æ­¥éª¤2ï¼šåˆ›å»ºå¤©æ°”å·¥å…·
```java
@Service
public class WeatherTool {
    
    @Autowired
    private WeatherApiClient weatherApiClient;
    
    @Tool(description = "æŸ¥è¯¢åŸå¸‚å¤©æ°”")
    public WeatherInfo getWeather(@ToolParam(description = "åŸå¸‚åç§°") String city) {
        return weatherApiClient.getWeatherByCity(city);
    }
    
    @Tool(description = "è·å–å¤šä¸ªåŸå¸‚å¤©æ°”")
    public List<WeatherInfo> getMultiCityWeather(@ToolParam(description = "åŸå¸‚åç§°åˆ—è¡¨ï¼Œç”¨é€—å·åˆ†éš”") String cities) {
        return Arrays.stream(cities.split(","))
                .map(String::trim)
                .map(weatherApiClient::getWeatherByCity)
                .collect(Collectors.toList());
    }
}
```

### æ­¥éª¤3ï¼šæµ‹è¯•å¤©æ°”æŸ¥è¯¢
```bash
curl -X POST "http://localhost:8080/api/chat/message?message=åŒ—äº¬ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"
```

### ç»ƒä¹ ä»»åŠ¡
1. æ·»åŠ å¤©æ°”é¢„æŠ¥åŠŸèƒ½
2. å®ç°å¤©æ°”æ•°æ®ç¼“å­˜
3. æ”¯æŒæ›´å¤šå¤©æ°”APIæä¾›å•†

## ğŸ‘¥ ç»ƒä¹ å››ï¼šç”¨æˆ·ç®¡ç†ç³»ç»Ÿ

### ä»»åŠ¡ç›®æ ‡
å®ç°å®Œæ•´çš„ç”¨æˆ·CRUDæ“ä½œï¼Œå¹¶ä¸AIèŠå¤©é›†æˆã€‚

### æ­¥éª¤1ï¼šåˆ›å»ºç”¨æˆ·å®ä½“å’Œæ•°æ®åº“è¡¨
```sql
CREATE TABLE users (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(100) NOT NULL,
    email VARCHAR(100),
    status VARCHAR(20) DEFAULT 'ACTIVE',
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

### æ­¥éª¤2ï¼šå®ç°ç”¨æˆ·æœåŠ¡
```java
@Service
@Transactional
@Slf4j
public class UserService {
    
    @Autowired
    private UserMapper userMapper;
    
    public User createUser(User user) {
        // éªŒè¯ç”¨æˆ·åå”¯ä¸€æ€§
        if (userMapper.selectUserByUsername(user.getUsername()) != null) {
            throw new RuntimeException("ç”¨æˆ·åå·²å­˜åœ¨");
        }
        
        // å¯†ç åŠ å¯†
        user.setPassword(encryptPassword(user.getPassword()));
        user.setStatus("ACTIVE");
        
        userMapper.insertUser(user);
        log.info("åˆ›å»ºç”¨æˆ·æˆåŠŸ: {}", user.getUsername());
        return user;
    }
    
    public User getUserById(Long id) {
        return userMapper.selectUserById(id);
    }
    
    public List<User> getAllUsers() {
        return userMapper.selectAllUsers();
    }
    
    public User updateUser(User user) {
        User existingUser = userMapper.selectUserById(user.getId());
        if (existingUser == null) {
            throw new RuntimeException("ç”¨æˆ·ä¸å­˜åœ¨");
        }
        
        userMapper.updateUser(user);
        return user;
    }
    
    public void deleteUser(Long id) {
        userMapper.deleteUserById(id);
    }
    
    private String encryptPassword(String password) {
        // ç®€å•çš„å¯†ç åŠ å¯†ï¼Œå®é™…é¡¹ç›®ä¸­åº”ä½¿ç”¨BCryptç­‰
        return DigestUtils.md5DigestAsHex(password.getBytes());
    }
}
```

### æ­¥éª¤3ï¼šåˆ›å»ºç”¨æˆ·ç®¡ç†å·¥å…·
```java
@Service
public class UserManagementTool {
    
    @Autowired
    private UserService userService;
    
    @Tool(description = "åˆ›å»ºæ–°ç”¨æˆ·")
    public String createUser(@ToolParam(description = "ç”¨æˆ·å") String username,
                            @ToolParam(description = "å¯†ç ") String password,
                            @ToolParam(description = "é‚®ç®±") String email) {
        try {
            User user = User.builder()
                    .username(username)
                    .password(password)
                    .email(email)
                    .build();
            
            userService.createUser(user);
            return "ç”¨æˆ·åˆ›å»ºæˆåŠŸï¼Œç”¨æˆ·ID: " + user.getId();
        } catch (Exception e) {
            return "åˆ›å»ºç”¨æˆ·å¤±è´¥: " + e.getMessage();
        }
    }
    
    @Tool(description = "æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯")
    public String getUserInfo(@ToolParam(description = "ç”¨æˆ·ID") Long userId) {
        try {
            User user = userService.getUserById(userId);
            if (user != null) {
                return String.format("ç”¨æˆ·ä¿¡æ¯: ID=%d, ç”¨æˆ·å=%s, é‚®ç®±=%s, çŠ¶æ€=%s", 
                    user.getId(), user.getUsername(), user.getEmail(), user.getStatus());
            } else {
                return "ç”¨æˆ·ä¸å­˜åœ¨";
            }
        } catch (Exception e) {
            return "æŸ¥è¯¢ç”¨æˆ·å¤±è´¥: " + e.getMessage();
        }
    }
    
    @Tool(description = "è·å–æ‰€æœ‰ç”¨æˆ·")
    public String getAllUsers() {
        try {
            List<User> users = userService.getAllUsers();
            if (users.isEmpty()) {
                return "æš‚æ— ç”¨æˆ·";
            }
            
            StringBuilder result = new StringBuilder("ç”¨æˆ·åˆ—è¡¨:\n");
            for (User user : users) {
                result.append(String.format("- ID: %d, ç”¨æˆ·å: %s, çŠ¶æ€: %s\n", 
                    user.getId(), user.getUsername(), user.getStatus()));
            }
            return result.toString();
        } catch (Exception e) {
            return "è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥: " + e.getMessage();
        }
    }
}
```

### ç»ƒä¹ ä»»åŠ¡
1. æ·»åŠ ç”¨æˆ·æƒé™ç®¡ç†
2. å®ç°ç”¨æˆ·ç™»å½•éªŒè¯
3. æ·»åŠ ç”¨æˆ·æ“ä½œæ—¥å¿—

## ğŸ”„ ç»ƒä¹ äº”ï¼šæµå¼å“åº”å’Œè®°å¿†ç®¡ç†

### ä»»åŠ¡ç›®æ ‡
å®ç°æµå¼èŠå¤©å“åº”å’Œå¯¹è¯å†å²ç®¡ç†ã€‚

### æ­¥éª¤1ï¼šå®ç°æµå¼èŠå¤©
```java
@RestController
@RequestMapping("/api/chat")
public class StreamChatController {
    
    @Autowired
    private ChatClient chatClient;
    
    @GetMapping(value = "/stream", produces = MediaType.TEXT_EVENT_STREAM_VALUE)
    public Flux<String> streamChat(@RequestParam String message) {
        return chatClient.prompt()
                .user(message)
                .stream()
                .content();
    }
    
    @GetMapping(value = "/stream-with-tools", produces = MediaType.TEXT_EVENT_STREAM_VALUE)
    public Flux<String> streamChatWithTools(@RequestParam String message) {
        return chatClient.prompt()
                .user(message)
                .stream()
                .content();
    }
}
```

### æ­¥éª¤2ï¼šé…ç½®è®°å¿†ç®¡ç†
```java
@Configuration
public class MemoryConfig {
    
    @Bean
    public ChatMemory chatMemory() {
        return MessageWindowChatMemory
                .builder()
                .maxMessages(50)  // ä¿ç•™æœ€è¿‘50æ¡æ¶ˆæ¯
                .build();
    }
    
    @Bean
    public ChatClient chatClientWithMemory(OllamaChatModel ollamaChatModel, 
                                          ChatMemory chatMemory,
                                          CalculatorTool calculatorTool) {
        return ChatClient.builder(ollamaChatModel)
                .defaultSystem("ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹ï¼Œèƒ½å¤Ÿè®°ä½å¯¹è¯å†å²ã€‚")
                .defaultAdvisors(PromptChatMemoryAdvisor.builder(chatMemory).build())
                .defaultTools(calculatorTool)
                .build();
    }
}
```

### æ­¥éª¤3ï¼šæµ‹è¯•æµå¼èŠå¤©
```bash
# ä½¿ç”¨curlæµ‹è¯•æµå¼å“åº”
curl -N "http://localhost:8080/api/chat/stream?message=è¯·ç»™æˆ‘è®²ä¸€ä¸ªæ•…äº‹"
```

### ç»ƒä¹ ä»»åŠ¡
1. å®ç°å¤šç”¨æˆ·ä¼šè¯éš”ç¦»
2. æ·»åŠ å¯¹è¯ä¸»é¢˜åˆ†ç±»
3. å®ç°å¯¹è¯å¯¼å‡ºåŠŸèƒ½

## ğŸ¨ ç»ƒä¹ å…­ï¼šå‰ç«¯ç•Œé¢å¼€å‘

### ä»»åŠ¡ç›®æ ‡
åˆ›å»ºä¸€ä¸ªç®€å•çš„å‰ç«¯ç•Œé¢æ¥æµ‹è¯•AIèŠå¤©åŠŸèƒ½ã€‚

### æ­¥éª¤1ï¼šåˆ›å»ºHTMLé¡µé¢
```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpringAI èŠå¤©ç•Œé¢</title>
    <style>
        .chat-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .chat-messages {
            height: 400px;
            border: 1px solid #ccc;
            overflow-y: auto;
            padding: 10px;
            margin-bottom: 20px;
        }
        .message {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 5px;
        }
        .user-message {
            background-color: #e3f2fd;
            text-align: right;
        }
        .ai-message {
            background-color: #f5f5f5;
        }
        .input-container {
            display: flex;
            gap: 10px;
        }
        .message-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .send-button {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .send-button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <h1>SpringAI æ™ºèƒ½åŠ©æ‰‹</h1>
        <div class="chat-messages" id="chatMessages"></div>
        <div class="input-container">
            <input type="text" class="message-input" id="messageInput" placeholder="è¯·è¾“å…¥æ‚¨çš„é—®é¢˜...">
            <button class="send-button" onclick="sendMessage()">å‘é€</button>
        </div>
    </div>

    <script>
        function addMessage(content, isUser = false) {
            const messagesDiv = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'ai-message'}`;
            messageDiv.textContent = content;
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        async function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // æ˜¾ç¤ºç”¨æˆ·æ¶ˆæ¯
            addMessage(message, true);
            input.value = '';
            
            try {
                // å‘é€è¯·æ±‚åˆ°åç«¯
                const response = await fetch('/api/chat/message', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `message=${encodeURIComponent(message)}`
                });
                
                const result = await response.text();
                
                // æ˜¾ç¤ºAIå›å¤
                addMessage(result);
            } catch (error) {
                addMessage('æŠ±æ­‰ï¼Œå‘ç”Ÿäº†é”™è¯¯: ' + error.message);
            }
        }

        // æ”¯æŒå›è½¦å‘é€
        document.getElementById('messageInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>
```

### æ­¥éª¤2ï¼šæ·»åŠ é™æ€èµ„æºæ”¯æŒ
```java
@Configuration
public class WebConfig implements WebMvcConfigurer {
    
    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/static/**")
                .addResourceLocations("classpath:/static/");
    }
}
```

### ç»ƒä¹ ä»»åŠ¡
1. æ·»åŠ æµå¼å“åº”æ˜¾ç¤º
2. å®ç°æ¶ˆæ¯å†å²ä¿å­˜
3. æ·»åŠ å·¥å…·è°ƒç”¨å¯è§†åŒ–

## ğŸ§ª ç»ƒä¹ ä¸ƒï¼šæµ‹è¯•å’Œè°ƒè¯•

### ä»»åŠ¡ç›®æ ‡
ç¼–å†™å®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹ï¼Œç¡®ä¿åº”ç”¨è´¨é‡ã€‚

### æ­¥éª¤1ï¼šå•å…ƒæµ‹è¯•
```java
@SpringBootTest
class ChatServiceTest {
    
    @Autowired
    private ChatClient chatClient;
    
    @Test
    void testBasicChat() {
        String response = chatClient.prompt()
                .user("ä½ å¥½")
                .call()
                .content();
        
        assertNotNull(response);
        assertFalse(response.isEmpty());
    }
    
    @Test
    void testToolCall() {
        String response = chatClient.prompt()
                .user("è¯·è®¡ç®— 10 + 20")
                .call()
                .content();
        
        assertNotNull(response);
        assertTrue(response.contains("30"));
    }
}
```

### æ­¥éª¤2ï¼šé›†æˆæµ‹è¯•
```java
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
class ChatControllerTest {
    
    @Autowired
    private TestRestTemplate restTemplate;
    
    @Test
    void testChatEndpoint() {
        String message = "ä½ å¥½";
        String response = restTemplate.postForObject(
            "/api/chat/message?message=" + message, 
            null, 
            String.class
        );
        
        assertNotNull(response);
        assertFalse(response.isEmpty());
    }
}
```

### æ­¥éª¤3ï¼šæ€§èƒ½æµ‹è¯•
```java
@Test
void testConcurrentRequests() throws InterruptedException {
    int threadCount = 10;
    CountDownLatch latch = new CountDownLatch(threadCount);
    ExecutorService executor = Executors.newFixedThreadPool(threadCount);
    
    for (int i = 0; i < threadCount; i++) {
        executor.submit(() -> {
            try {
                String response = chatClient.prompt()
                        .user("æµ‹è¯•æ¶ˆæ¯")
                        .call()
                        .content();
                assertNotNull(response);
            } finally {
                latch.countDown();
            }
        });
    }
    
    latch.await(30, TimeUnit.SECONDS);
    executor.shutdown();
}
```

### ç»ƒä¹ ä»»åŠ¡
1. æ·»åŠ æ›´å¤šè¾¹ç•Œæ¡ä»¶æµ‹è¯•
2. å®ç°å‹åŠ›æµ‹è¯•
3. æ·»åŠ APIæ–‡æ¡£æµ‹è¯•

## ğŸš€ ç»ƒä¹ å…«ï¼šéƒ¨ç½²å’Œç›‘æ§

### ä»»åŠ¡ç›®æ ‡
å­¦ä¹ å¦‚ä½•éƒ¨ç½²SpringAIåº”ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒã€‚

### æ­¥éª¤1ï¼šDockeråŒ–åº”ç”¨
```dockerfile
FROM openjdk:17-jdk-slim

WORKDIR /app

COPY target/SpringAI-0.0.1-SNAPSHOT.jar app.jar

EXPOSE 8080

ENV JAVA_OPTS="-Xmx512m -Xms256m"

ENTRYPOINT ["sh", "-c", "java $JAVA_OPTS -jar app.jar"]
```

### æ­¥éª¤2ï¼šDocker Composeé…ç½®
```yaml
version: '3.8'

services:
  springai-app:
    build: .
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=prod
      - WEATHER_API_KEY=${WEATHER_API_KEY}
    depends_on:
      - mysql
    networks:
      - springai-network

  mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: 12345678
      MYSQL_DATABASE: db_springai
    ports:
      - "3306:3306"
    volumes:
      - mysql-data:/var/lib/mysql
    networks:
      - springai-network

volumes:
  mysql-data:

networks:
  springai-network:
    driver: bridge
```

### æ­¥éª¤3ï¼šç›‘æ§é…ç½®
```yaml
# application-prod.yml
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always
  metrics:
    export:
      prometheus:
        enabled: true

logging:
  level:
    org.example.springai: INFO
  file:
    name: logs/spring-ai.log
  pattern:
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
```

### ç»ƒä¹ ä»»åŠ¡
1. é…ç½®æ—¥å¿—èšåˆ
2. è®¾ç½®å‘Šè­¦è§„åˆ™
3. å®ç°è‡ªåŠ¨æ‰©ç¼©å®¹

## ğŸ“Š ç»ƒä¹ ä¹ï¼šæ€§èƒ½ä¼˜åŒ–

### ä»»åŠ¡ç›®æ ‡
ä¼˜åŒ–åº”ç”¨æ€§èƒ½ï¼Œæé«˜å“åº”é€Ÿåº¦ã€‚

### æ­¥éª¤1ï¼šç¼“å­˜é…ç½®
```java
@Configuration
@EnableCaching
public class CacheConfig {
    
    @Bean
    public CacheManager cacheManager() {
        SimpleCacheManager cacheManager = new SimpleCacheManager();
        cacheManager.setCaches(Arrays.asList(
            new ConcurrentMapCache("weather"),
            new ConcurrentMapCache("users")
        ));
        return cacheManager;
    }
}
```

### æ­¥éª¤2ï¼šå¼‚æ­¥å¤„ç†
```java
@Service
public class AsyncWeatherService {
    
    @Async
    public CompletableFuture<WeatherInfo> getWeatherAsync(String city) {
        // å¼‚æ­¥è·å–å¤©æ°”ä¿¡æ¯
        WeatherInfo weather = weatherApiClient.getWeatherByCity(city);
        return CompletableFuture.completedFuture(weather);
    }
}
```

### æ­¥éª¤3ï¼šè¿æ¥æ± ä¼˜åŒ–
```yaml
spring:
  datasource:
    druid:
      initial-size: 10
      min-idle: 10
      max-active: 50
      max-wait: 60000
      time-between-eviction-runs-millis: 60000
      min-evictable-idle-time-millis: 300000
      validation-query: SELECT 1
      test-while-idle: true
      test-on-borrow: false
      test-on-return: false
```

### ç»ƒä¹ ä»»åŠ¡
1. å®ç°Redisç¼“å­˜
2. æ·»åŠ æ•°æ®åº“è¯»å†™åˆ†ç¦»
3. ä¼˜åŒ–AIæ¨¡å‹è°ƒç”¨

## ğŸ¯ ç»ƒä¹ åï¼šç»¼åˆé¡¹ç›®

### ä»»åŠ¡ç›®æ ‡
å°†æ‰€æœ‰ç»ƒä¹ å†…å®¹æ•´åˆï¼Œæ„å»ºä¸€ä¸ªå®Œæ•´çš„AIåº”ç”¨ã€‚

### é¡¹ç›®è¦æ±‚
1. **åŠŸèƒ½å®Œæ•´æ€§**
   - AIèŠå¤©åŠŸèƒ½
   - å·¥å…·è°ƒç”¨ï¼ˆè®¡ç®—å™¨ã€å¤©æ°”ã€ç”¨æˆ·ç®¡ç†ï¼‰
   - æµå¼å“åº”
   - å¯¹è¯å†å²ç®¡ç†

2. **æŠ€æœ¯ç‰¹æ€§**
   - å®Œæ•´çš„CRUDæ“ä½œ
   - ç¼“å­˜æœºåˆ¶
   - å¼‚å¸¸å¤„ç†
   - æ—¥å¿—è®°å½•
   - å•å…ƒæµ‹è¯•

3. **éƒ¨ç½²è¦æ±‚**
   - Dockerå®¹å™¨åŒ–
   - ç”Ÿäº§ç¯å¢ƒé…ç½®
   - ç›‘æ§å’Œå‘Šè­¦
   - æ€§èƒ½ä¼˜åŒ–

### é¡¹ç›®ç»“æ„
```
SpringAI-Complete/
â”œâ”€â”€ src/main/java/
â”‚   â””â”€â”€ org/example/springai/
â”‚       â”œâ”€â”€ config/          # é…ç½®ç±»
â”‚       â”œâ”€â”€ controller/      # æ§åˆ¶å™¨
â”‚       â”œâ”€â”€ service/         # ä¸šåŠ¡é€»è¾‘
â”‚       â”œâ”€â”€ mapper/          # æ•°æ®è®¿é—®
â”‚       â”œâ”€â”€ model/           # å®ä½“ç±»
â”‚       â”œâ”€â”€ tools/           # AIå·¥å…·
â”‚       â””â”€â”€ util/            # å·¥å…·ç±»
â”œâ”€â”€ src/main/resources/
â”‚   â”œâ”€â”€ static/              # é™æ€èµ„æº
â”‚   â”œâ”€â”€ templates/           # æ¨¡æ¿æ–‡ä»¶
â”‚   â”œâ”€â”€ mapper/              # MyBatisæ˜ å°„
â”‚   â””â”€â”€ sql/                 # æ•°æ®åº“è„šæœ¬
â”œâ”€â”€ src/test/                # æµ‹è¯•ä»£ç 
â”œâ”€â”€ docker/                  # Dockeré…ç½®
â”œâ”€â”€ docs/                    # æ–‡æ¡£
â””â”€â”€ scripts/                 # éƒ¨ç½²è„šæœ¬
```

### éªŒæ”¶æ ‡å‡†
1. æ‰€æœ‰åŠŸèƒ½æ­£å¸¸è¿è¡Œ
2. ä»£ç è´¨é‡è‰¯å¥½ï¼ˆæ— ä¸¥é‡è­¦å‘Šï¼‰
3. æµ‹è¯•è¦†ç›–ç‡ > 80%
4. æ€§èƒ½æ»¡è¶³è¦æ±‚ï¼ˆå“åº”æ—¶é—´ < 2ç§’ï¼‰
5. æ–‡æ¡£å®Œæ•´

## ğŸ“ ç»ƒä¹ æ€»ç»“

é€šè¿‡è¿™åä¸ªç»ƒä¹ ï¼Œæ‚¨åº”è¯¥å·²ç»æŒæ¡äº†ï¼š

1. **SpringAIæ ¸å¿ƒæ¦‚å¿µ**ï¼šChatClientã€å·¥å…·è°ƒç”¨ã€è®°å¿†ç®¡ç†
2. **å®é™…å¼€å‘æŠ€èƒ½**ï¼šAPIè®¾è®¡ã€æ•°æ®åº“æ“ä½œã€å‰ç«¯é›†æˆ
3. **å·¥ç¨‹åŒ–å®è·µ**ï¼šæµ‹è¯•ã€éƒ¨ç½²ã€ç›‘æ§ã€ä¼˜åŒ–
4. **é—®é¢˜è§£å†³èƒ½åŠ›**ï¼šè°ƒè¯•ã€æ€§èƒ½è°ƒä¼˜ã€æ•…éšœæ’é™¤

### ä¸‹ä¸€æ­¥å»ºè®®

1. **æ·±å…¥å­¦ä¹ **ï¼šé˜…è¯»SpringAIå®˜æ–¹æ–‡æ¡£å’Œæºç 
2. **å®è·µé¡¹ç›®**ï¼šåŸºäºå­¦åˆ°çš„çŸ¥è¯†å¼€å‘è‡ªå·±çš„AIåº”ç”¨
3. **ç¤¾åŒºå‚ä¸**ï¼šåŠ å…¥SpringAIç¤¾åŒºï¼Œåˆ†äº«ç»éªŒ
4. **æŒç»­å­¦ä¹ **ï¼šå…³æ³¨AIæŠ€æœ¯å‘å±•ï¼Œå­¦ä¹ æ–°çš„æ¨¡å‹å’Œå·¥å…·

### èµ„æºæ¨è

- [SpringAIå®˜æ–¹æ–‡æ¡£](https://docs.spring.io/spring-ai/reference/)
- [Spring Bootæœ€ä½³å®è·µ](https://spring.io/guides)
- [AIæ¨¡å‹é›†æˆæŒ‡å—](https://docs.spring.io/spring-ai/reference/api/clients.html)
- [æ€§èƒ½ä¼˜åŒ–æŠ€å·§](https://docs.spring.io/spring-framework/reference/web/webflux/performance.html)

---

**æ­å–œæ‚¨å®Œæˆäº†æ‰€æœ‰ç»ƒä¹ ï¼** ğŸ‰

ç°åœ¨æ‚¨å·²ç»å…·å¤‡äº†ä½¿ç”¨SpringAIæ„å»ºç”Ÿäº§çº§AIåº”ç”¨çš„èƒ½åŠ›ã€‚è®°ä½ï¼ŒæŠ€æœ¯å­¦ä¹ æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œä¿æŒå¥½å¥‡å¿ƒï¼Œä¸æ–­å®è·µï¼Œæ‚¨ä¼šåœ¨è¿™ä¸ªé¢†åŸŸèµ°å¾—æ›´è¿œï¼ 